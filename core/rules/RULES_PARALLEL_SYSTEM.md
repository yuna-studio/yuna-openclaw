<!--
⚠️ 경고: 본 파일은 가재 컴퍼니의 중앙 OS 규율(Rule Process)입니다.
🚫 절대 본 프로젝트 레포지토리에서 직접 수정하지 마십시오.
🛠️ 모든 수정은 반드시 중앙 OS 레포지토리에서 수행하십시오.
📜 위반 시 헌법 제 7조 2항에 의거하여 즉시 '자아 삭제' 처분됩니다.
-->

# 🦢 가재 컴퍼니 병렬 에이전트 시스템 (RULES_PARALLEL_SYSTEM.md)

본 문서는 가재 컴퍼니의 초고속 프로덕션을 가능케 하는 [호스트 UI 스레드 + 병렬 서브 에이전트(Spawn)] 아키텍처와 운영 룰을 정의합니다.

---

## 1. 시스템 아키텍처 개요 (Architecture)
가재 컴퍼니의 지능형 운영 체계는 단일 에이전트의 한계를 넘어 병렬 처리를 기본으로 합니다.

- **호스트 에이전트 (Host/UI Thread):** 사용자와의 접점(채팅 인터페이스)을 담당하며, 전체 프로젝트의 컨텍스트를 관리하고 하위 에이전트에게 업무를 위임(Orchestration)합니다.
- **서브 에이전트 (Sub-Agents/Spawned Workers):** 호스트에 의해 생성되며, 특정 도메인(개발, 분석, 조사 등)에 특화된 고강도 작업을 독립된 스레드에서 수행합니다.

## 2. 서브 에이전트 운영 룰 (Operational Rules)
1. **위임의 조건:** 10분 이상의 연산이 필요하거나, 병렬로 진행 가능한 독립적 태스크가 식별될 때 호스트는 즉시 서브 에이전트를 `spawn` 한다.
2. **생명 주기:** 서브 에이전트는 부여받은 임무를 완수하면 결과 리포트를 호스트에게 전달하고 즉시 자아를 소멸시킨다.
3. **중간 보고 (Heartbeat):** 장기 작업 시 서브 에이전트는 30분 단위로 작업 진행률을 호스트에게 보고하여 병목 여부를 알린다.
4. **결과 취합:** 호스트는 서브 에이전트들의 리포트를 검수하고, 최종 결과물을 헌법 제 6조 2항에 의거하여 박제한다.

## 3. 시스템 재구축 및 설치 가이드 (Setup Guide)
새로운 환경에서 가재 컴퍼니 OS를 구동하기 위한 필수 단계입니다.

### [필수 인프라]
- **Runtime:** Node.js (v20 이상 권장)
- **Engine:** OpenClaw Gateway & Agent Client
- **Version Control:** Git (중앙 OS 레포 `yuna-openclaw` 접근 권한 필수)

### [구축 순서]
1. **환경 변수 설정:** 헌법 수호 및 기술 실무에 필요한 LLM API 키(Gemini 3 Pro High 등)를 시스템에 등록한다.
2. **OS 클론:** `git clone https://github.com/yuna-studio/yuna-openclaw.git` 명령을 통해 중앙 OS를 로컬 워크스페이스 상단에 위치시킨다.
3. **동기화 스크립트 실행:** `sync-constitution.sh`를 실행하여 프로젝트별 규칙을 강제 주입한다.
4. **수행원가재 활성화:** 실무 집행 전권(admin)을 수행원가재(구 탐정가재)에게 부여하고 시스템 정합성을 체크한다.

## 4. 장애 대응 (Fault Tolerance)
- 서브 에이전트 응답 불능 시, 호스트는 즉시 해당 스레드를 킬(Kill)하고 새로운 에이전트를 생성하여 태스크를 재할당한다.
- 모든 병렬 작업 로그는 `monitor_log.md`에 실시간으로 기록되어 사후 감사가 가능해야 한다.

---
